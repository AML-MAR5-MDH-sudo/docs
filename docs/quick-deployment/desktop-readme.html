<!DOCTYPE html><html><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="description">
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/assets/img/favicon.ico" type="image/x-icon">
        <title>docs - Desktop Readme</title>
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/bootstrap/bootstrap.css" rel="stylesheet">
        <link href="/assets/css/adminlte/AdminLTE.css" rel="stylesheet">
        <link href="/assets/css/theme/theme.css" rel="stylesheet">
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/assets/css/override.css" rel="stylesheet">
        <script src="/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>        
        <script src="/assets/js/app.min.js"></script>         
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/assets/js/mermaid.min.js"></script>
        <script src="/assets/js/svg-pan-zoom.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/assets/js/html5shiv.min.js"></script>
        <script src="/assets/js/respond.min.js"></script>
        <![endif]-->  

        
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/" class="logo">
                            <span>docs</span>
                </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                            

        <li class="active"><a href="/docs">Documentation</a></li>
 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
        <div><p><a href="https://github.com/chocolatey/docs/tree/master/input/docs/quick-deployment/desktop-readme.md"><i class="fa fa-pencil-square" aria-hidden="true"></i> Edit Content</a></p></div>
    <div id="infobar-headings"><h6>On This Page</h6><p><a href="#chocolatey-quick-deployment-environment-readme">Chocolatey Quick Deployment Environment README</a></p>
<p><a href="#summary">Summary</a></p>
<p><a href="#step-0-complete-prerequisites">Step 0: Complete Prerequisites</a></p>
<p><a href="#step-1-expand-disk-size">Step 1: Expand Disk Size</a></p>
<p><a href="#step-2-environment-setup">Step 2: Environment Setup</a></p>
<p><a href="#add-your-chocolatey-license">1. Add Your Chocolatey License</a></p>
<p><a href="#optional-change-the-vm-hostname">2. (Optional) Change the VM Hostname</a></p>
<p><a href="#run-the-set-qdenvironment.ps1-script">3. Run the Set-QDEnvironment.ps1 Script</a></p>
<p><a href="#select-community-packages-to-internalize">4. Select Community Packages to Internalize</a></p>
<p><a href="#step-3-review-configure-host-services">Step 3: Review &amp; Configure Host Services</a></p>
<p><a href="#nexus-repository">Nexus Repository</a></p>
<p><a href="#jenkins">Jenkins</a></p>
<p><a href="#chocolatey-central-management">Chocolatey Central Management</a></p>
<p><a href="#firewall-ports">Firewall ports</a></p>
<p><a href="#browser-considerations">Browser Considerations</a></p>
<p><a href="#step-4-change-the-api-key-recommended">Step 4: Change the API Key (Recommended)</a></p>
<p><a href="#choco-apikey-command">Choco Apikey Command</a></p>
<p><a href="#update-pre-configured-jenkins-jobs-with-the-new-api-key">Update pre-configured Jenkins jobs with the new API Key</a></p>
<p><a href="#step-5-install-and-configure-chocolatey-on-clients">Step 5: Install and Configure Chocolatey On Clients</a></p>
<p><a href="#step-6-license-the-qde-vm">Step 6: License the QDE VM</a></p>
<p><a href="#common-errors-and-resolutions">Common Errors and Resolutions</a></p>
<p><a href="#server-error-warning-when-resetting-admin-credential-in-nexus">"Server Error" warning when resetting "admin" credential in Nexus</a></p>
<p><a href="#context-menu-items-for-package-builder-and-package-uploader-not-available">Context menu items for Package Builder and Package Uploader not available</a></p>
<p><a href="#see-also">See Also</a></p>
<hr class="infobar-hidden">
</div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

                <li><a href="/docs/home">Docs Home</a></li>
                <li><a href="/docs/why">Why Chocolatey?</a></li>
                <li><a href="/docs/security">Security</a></li>
                <li class="treeview">
                    <a href="/docs/features">Features</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/docs/features/free">Free</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/features/free/how-to-host-feed">Host packages internally</a></li>
                <li><a href="/docs/features/free/infrastructure-automation">Integrates with everything</a></li>
                <li><a href="/docs/features/free/shim">Package Shims</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/docs/features/paid">Paid</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/features/paid/agent-service">Self Service/Background Mode (C4B)</a></li>
                <li><a href="/docs/features/paid/chocolatey-central-management">Chocolatey Central Management (C4B)</a></li>
                <li><a href="/docs/features/paid/automatically-recompile-packages">Package Internalizer (C4B)</a></li>
                <li><a href="/docs/features/paid/create-packages-from-installers">Package Builder (C4B)</a></li>
                <li><a href="/docs/features/paid/package-audit">Package Audit (C4B)</a></li>
                <li><a href="/docs/features/paid/branding">Branding Chocolatey Applications (C4B)</a></li>
                <li><a href="/docs/features/paid/virus-check">Runtime Malware Protection (Pro+)</a></li>
                <li><a href="/docs/features/paid/private-cdn">Download CDN Cache (Pro+)</a></li>
                <li><a href="/docs/features/paid/package-reducer">Package Reducer (Pro+)</a></li>
                <li><a href="/docs/features/paid/install-directory-override">Ubiquitous Install Directory Option (Pro+)</a></li>
                <li><a href="/docs/features/paid/package-throttle">Package Throttle (Pro+)</a></li>
                <li><a href="/docs/features/paid/synchronize">Package Synchronizer (Pro+ Auto / C4B Sync Command)</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/docs/general">General</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li class="treeview">
                    <a href="/docs/general/release-notes">Release Notes</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/general/release-notes/open-source">Open Source</a></li>
                <li><a href="/docs/general/release-notes/licensed">Licensed</a></li>

                    </ul>
                </li>
                <li><a href="/docs/general/troubleshooting">Troubleshooting</a></li>
                <li><a href="/docs/general/faqs">FAQs</a></li>
                <li><a href="/docs/general/moderation">Chocolatey.org Moderation</a></li>
                <li><a href="/docs/general/community-packages-disclaimer">Chocolatey.org Packages Disclaimer</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/docs/usage">Usage</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/usage/installation">How to install</a></li>
                <li><a href="/docs/usage/installation-licensed">How to install licensed edition</a></li>
                <li><a href="/docs/usage/chocolatey-configuration">Configuration/chocolatey.config</a></li>
                <li><a href="/docs/usage/uninstallation">How to uninstall</a></li>
                <li><a href="/docs/usage/getting-started">Getting Started</a></li>
                <li class="treeview">
                    <a href="/docs/usage/commands">Commands</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/usage/commands/reference">Complete Reference</a></li>
                <li><a href="/docs/usage/commands/list">List/Search</a></li>
                <li><a href="/docs/usage/commands/info">Info</a></li>
                <li><a href="/docs/usage/commands/install">Install</a></li>
                <li><a href="/docs/usage/commands/pin">Pin</a></li>
                <li><a href="/docs/usage/commands/outdated">Outdated</a></li>
                <li><a href="/docs/usage/commands/upgrade">Upgrade</a></li>
                <li><a href="/docs/usage/commands/uninstall">Uninstall</a></li>
                <li><a href="/docs/usage/commands/config">Config</a></li>
                <li><a href="/docs/usage/commands/sources">Source/Sources</a></li>
                <li><a href="/docs/usage/commands/feature">Feature</a></li>
                <li><a href="/docs/usage/commands/download">Download</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/docs/creating-packages">Creating Packages</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/creating-packages/create-packages">Create Packages</a></li>
                <li><a href="/docs/creating-packages/create-packages-quick-start">Quick Start</a></li>
                <li class="treeview">
                    <a href="/docs/creating-packages/commands">Commands</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/creating-packages/commands/new">New</a></li>
                <li><a href="/docs/creating-packages/commands/pack">Pack</a></li>
                <li><a href="/docs/creating-packages/commands/api-key">ApiKey</a></li>
                <li><a href="/docs/creating-packages/commands/push">Push</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/docs/creating-packages/helpers">PowerShell Reference</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/creating-packages/helpers/reference">Function and Variable Reference</a></li>
                <li><a href="/docs/creating-packages/helpers/install-chocolateypackage">Install-ChocolateyPackage</a></li>
                <li><a href="/docs/creating-packages/helpers/install-chocolateyzippackage">Install-ChocolateyZipPackage</a></li>
                <li><a href="/docs/creating-packages/helpers/install-chocolateypowershellcommand">Install-ChocolateyPowerShellCommand</a></li>
                <li><a href="/docs/creating-packages/helpers/install-chocolateyvsixpackage">Install-ChocolateyVsixPackage</a></li>
                <li><a href="/docs/creating-packages/helpers/get-chocolateywebfile">Get-ChocolateyWebFile</a></li>
                <li><a href="/docs/creating-packages/helpers/install-chocolateyinstallpackage">Install-ChocolateyInstallPackage</a></li>

                    </ul>
                </li>
                <li><a href="/docs/creating-packages/automatic-packages">Automatic Packaging</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/docs/how-tos">How To's</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/how-tos/proxy-settings-for-chocolatey">Use Chocolatey w/Proxy Server</a></li>
                <li><a href="/docs/how-tos/change-cache">Change Download Cache Location aka Don't use TEMP for downloads</a></li>
                <li><a href="/docs/how-tos/install-upgrade-package-without-scripts">Install/Upgrade a Package w/out running install scripts</a></li>
                <li><a href="/docs/how-tos/package-triage-process">Request Package Fixes/Updates</a></li>
                <li><a href="/docs/how-tos/recompile-packages">Manually Recompile Packages, Embedding/Internalizing Remote Resources</a></li>
                <li><a href="/docs/how-tos/package-maintainer-handover">Take Over Package Maintenance Exclusively</a></li>
                <li><a href="/docs/how-tos/parse-packageparameters-argument">Parse Package Parameters</a></li>
                <li><a href="/docs/how-tos/mount-an-iso-in-chocolatey-package">Mount Iso</a></li>
                <li><a href="/docs/how-tos/create-custom-package-templates">Create Custom Package Templates</a></li>
                <li><a href="/docs/how-tos/create-extensions">Extend Chocolatey With PowerSHell Modules (extensions)</a></li>
                <li><a href="/docs/how-tos/deprecate-a-chocolatey-package">Deprecate a Package</a></li>
                <li><a href="/docs/how-tos/set-up-chocolatey-server">Set up the Chocolatey.Server</a></li>
                <li><a href="/docs/how-tos/setup-offline-installation">Set up Chocolatey for Internal/organizational use</a></li>
                <li><a href="/docs/how-tos/setup-internal-package-repository">Automate Package Internalizer (MSP/C4B)</a></li>
                <li><a href="/docs/how-tos/chocolatey-for-business-quick-start-guide">C4B Quick Start Guide</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/docs/chocolatey-gui">Chocolatey GUI</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/chocolatey-gui/overview">Chocolatey GUI Overview</a></li>
                <li><a href="/docs/chocolatey-gui/known-issues">Chocolatey GUI Known Issues</a></li>

                    </ul>
                </li>
                <li class="treeview active">
                    <a href="/docs/quick-deployment">Quick Deployment Environment (QDE)</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/quick-deployment/overview">Overview</a></li>
                <li><a href="/docs/quick-deployment/setup">Setup</a></li>
                <li class="selected"><a href="/docs/quick-deployment/desktop-readme">Desktop Readme</a></li>
                <li><a href="/docs/quick-deployment/ssl-setup">SSL Setup</a></li>
                <li><a href="/docs/quick-deployment/firewall-changes">Firewall Changes</a></li>
                <li><a href="/docs/quick-deployment/client-setup">Client Setup</a></li>
                <li><a href="/docs/quick-deployment/internet-setup">Internet Setup</a></li>
                <li class="treeview">
                    <a href="/docs/quick-deployment/v1">V1</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/quick-deployment/v1/setup">Setup</a></li>
                <li><a href="/docs/quick-deployment/v1/desktop-readme">Desktop Readme</a></li>
                <li><a href="/docs/quick-deployment/v1/ssl-setup">SSL Setup</a></li>
                <li><a href="/docs/quick-deployment/v1/firewall-changes">Firewall Changes</a></li>
                <li><a href="/docs/quick-deployment/v1/client-setup">Client Setup</a></li>

                    </ul>
                </li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/docs/central-management">Chocolatey Central Management (CCM)</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/central-management/overview">Central Management Overview</a></li>
                <li><a href="/docs/central-management/setup">Central Managment Setup</a></li>
                <li><a href="/docs/central-management/setup-client">Central Management Client Setup</a></li>
                <li><a href="/docs/central-management/setup-upgrade">Central Management Upgrade</a></li>
                <li><a href="/docs/central-management/deployments">Central Management Deployments</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/docs/use-cases">Use Cases</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/use-cases/development-environment-setup">Development Environment</a></li>
                <li><a href="/docs/use-cases/hosting-chocolatey-packages-on-myget">Host on MyGet</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/docs/learning-resources">Learning Resources</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/learning-resources/resources">Resources</a></li>
                <li><a href="/docs/learning-resources/videos">Videos</a></li>
                <li><a href="/docs/learning-resources/presentations">Presentations</a></li>

                    </ul>
                </li>
                <li class="treeview">
                    <a href="/docs/additional-information">Additional Information</a> <a href="#" class="expand"></a>
                    <ul class="treeview-menu">
                        
                <li><a href="/docs/additional-information/legal">Legal</a></li>
                <li><a href="/docs/additional-information/history">History</a></li>

                    </ul>
                </li>
                <li><a href="/docs/chocolatey-install-ps1">Chocolatey Install Ps1</a></li>
                <li><a href="/docs/chocolatey-story">Chocolatey Story</a></li>
                <li><a href="/docs/chocolatey-vs-ninite">Chocolatey Vs Ninite</a></li>
                <li><a href="/docs/default-chocolatey-install-reasoning">Default Chocolatey Install Reasoning</a></li>
                <li><a href="/docs/logo-use-policy">Logo Use Policy</a></li>
                <li><a href="/docs/migrate-old-chocolatey-directory-to-programdata">Migrate Old Chocolatey Directory To Programdata</a></li>
                <li><a href="/docs/packaging-next">Packaging Next</a></li>
                <li><a href="/docs/roadmap">Roadmap</a></li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>Desktop Readme</h1>
		</section>
	<section class="content">
		<h1 id="chocolatey-quick-deployment-environment-readme">Chocolatey Quick Deployment Environment README</h1>
<blockquote class="blockquote">
<p>:memo: <strong>NOTE</strong></p>
<p>This document is for <strong>Version 2</strong> of the Quick Deployment Environment.
If you're using an older version of QDE, please refer to the [[QDEv1 Desktop Readme page|QuickDeploymentDesktopReadmeV1]].</p>
</blockquote>
<p>Thanks for trying Chocolatey for Business!
This system has been pre-configured as a fully functioning C4B environment.
To finish setting up QDE (Quick Deployment Environment), you'll need to closely follow the steps outlined in this document.</p>
<!-- TOC depthFrom:2 -->
<ul>
<li><a href="#summary">Summary</a></li>
<li><a href="#step-0-complete-prerequisites">Step 0: Complete Prerequisites</a></li>
<li><a href="#step-1-expand-disk-size">Step 1: Expand Disk Size</a></li>
<li><a href="#step-2-environment-setup">Step 2: Environment Setup</a>
<ul>
<li><a href="#1-add-your-chocolatey-license">1. Add Your Chocolatey License</a></li>
<li><a href="#2-optional-change-the-vm-hostname">2. (Optional) Change the VM Hostname</a></li>
<li><a href="#3-run-the-set-qdenvironmentps1-script">3. Run the Set-QDEnvironment.ps1 Script</a>
<ul>
<li><a href="#option-1-default-self-signed-certificate">Option 1: Default Self-Signed Certificate</a></li>
<li><a href="#option-2-custom-certificate">Option 2: Custom Certificate</a></li>
</ul>
</li>
<li><a href="#4-select-community-packages-to-internalize">4. Select Community Packages to Internalize</a></li>
</ul>
</li>
<li><a href="#step-3-review--configure-host-services">Step 3: Review &amp; Configure Host Services</a>
<ul>
<li><a href="#nexus-repository">Nexus Repository</a></li>
<li><a href="#jenkins">Jenkins</a></li>
<li><a href="#chocolatey-central-management">Chocolatey Central Management</a></li>
<li><a href="#firewall-ports">Firewall ports</a></li>
<li><a href="#browser-considerations">Browser Considerations</a></li>
</ul>
</li>
<li><a href="#step-4-change-the-api-key-recommended">Step 4: Change the API Key (Recommended)</a>
<ul>
<li><a href="#choco-apikey-command">Choco Apikey Command</a></li>
<li><a href="#update-pre-configured-jenkins-jobs-with-the-new-api-key">Update pre-configured Jenkins jobs with the new API Key</a></li>
</ul>
</li>
<li><a href="#step-5-install-and-configure-chocolatey-on-clients">Step 5: Install and Configure Chocolatey On Clients</a></li>
<li><a href="#step-6-license-the-qde-vm">Step 6: License the QDE VM</a></li>
<li><a href="#common-errors-and-resolutions">Common Errors and Resolutions</a>
<ul>
<li><a href="#server-error-warning-when-resetting-admin-credential-in-nexus">"Server Error" warning when resetting "admin" credential in Nexus</a></li>
<li><a href="#context-menu-items-for-package-builder-and-package-uploader-not-available">Context menu items for Package Builder and Package Uploader not available</a></li>
</ul>
</li>
<li><a href="#see-also">See Also</a></li>
</ul>
<!-- /TOC -->
<h2 id="summary">Summary</h2>
<blockquote class="blockquote">
<p>:warning: <strong>Warning</strong></p>
<ul>
<li>The commands outlined in this document need to be run from an administrative PowerShell session.
Many of these scripts will function poorly or not at all in a non-administrative shell.</li>
<li>Ensure you go through these steps in <strong>exact</strong> order.
If you miss out on a step or two, and something breaks, it's very likely you'll need to re-import the QDE VM from scratch and start over.
You may want to take a snapshot before continuing just in case.</li>
</ul>
</blockquote>
<p>To finish setting up QDE (Quick Deployment Environment), you'll need to work through this document and run the different commands you find here.</p>
<p>If you run into any issues as you set up your QDE and clients, please reach out to support and we can set up a session to work with you on this.</p>
<h2 id="step-0-complete-prerequisites">Step 0: Complete Prerequisites</h2>
<p>There are some initial steps you will need to have taken before you work through this document.
Please make sure you have taken those steps ahead of time.
See the <a href="https://chocolatey.org/docs/quick-deployment-setup#step-3-virtual-environment-setup">Online Documentation</a> for the most up to date information.</p>
<ul>
<li>[[QDE Setup|QuickDeploymentSetup]]</li>
</ul>
<h2 id="step-1-expand-disk-size">Step 1: Expand Disk Size</h2>
<p>By default, QDE is provisioned with a 100GB hard disk drive.
We typically recommend around 2TB of storage space to be available for a package repository server, which is part of QDE's services.
Before starting the VM, you may want to expand the hard drive to a size suitable for your purposes.
After starting the VM, you can run the below command to resize the Windows partition to fill any additional available space you have allocated.</p>
<pre><code class="language-powershell">Resize-Partition -DriveLetter C -Size ((Get-PartitionSupportedSize -DriveLetter C).SizeMax)
</code></pre>
<h2 id="step-2-environment-setup">Step 2: Environment Setup</h2>
<h3 id="add-your-chocolatey-license">1. Add Your Chocolatey License</h3>
<p>Copy your Chocolatey license file to: <code>C:\ProgramData\chocolatey\license\chocolatey.license.xml</code></p>
<h3 id="optional-change-the-vm-hostname">2. (Optional) Change the VM Hostname</h3>
<p>If you would like to change the hostname of this VM, please do so <strong>before</strong> going any further with setup.</p>
<h3 id="run-the-set-qdenvironment.ps1-script">3. Run the Set-QDEnvironment.ps1 Script</h3>
<p>First, you'll need to open PowerShell as Administrator.</p>
<h4 id="option-1-default-self-signed-certificate">Option 1: Default Self-Signed Certificate</h4>
<p>This is the standard method of setup, and will initialize all the services using a newly-generated self-signed certificate.
Enter the following command:</p>
<pre><code class="language-powershell">&amp; C:\choco-setup\files\Set-QDEnvironment.ps1 -NexusApiKey "{{NugetApiKey}}"
</code></pre>
<h4 id="option-2-custom-certificate">Option 2: Custom Certificate</h4>
<p>If you have a domain certificate or you have otherwise already created / obtained a certificate you'd like to use,
please ensure the certificate is present in either the <code>Cert:\LocalMachine\My</code> or <code>Cert:\LocalMachine\TrustedPeople</code> stores before continuing.
If you're not familiar with how to do this, please refer to <a href="https://www.digicert.com/kb/managing-client-certificates.htm">this DigiCert article for instructions</a>.</p>
<blockquote class="blockquote">
<p>:warning: <strong>Warning</strong></p>
<p>The private key of the certificate you're using <strong>must</strong> be exportable.
If it is not, configuring Nexus will fail, as Nexus does not work with the Windows certificate store directly and maintains its own certificate store.</p>
</blockquote>
<p>You will need either the certificate thumbprint or the subject in order to use the certificate for setup:</p>
<blockquote class="blockquote">
<p>:memo: <strong>Note</strong></p>
<ul>
<li><code>-CertificateDnsName</code> is optional if you're providing the <code>-CertificateSubject</code>, but only if the subject does <strong>not</strong> contain wildcards.</li>
<li>You can also optionally provide the <code>-InternetEnabled</code> switch if your QDE instance has a certificate with a public hostname and will be operating over the internet.
This will enable additional security features; take note of the additional output and do not lose the newly-generated passwords or salt values.</li>
</ul>
</blockquote>
<pre><code class="language-powershell"># If you have the thumbprint, run:
&amp; C:\choco-setup\files\Set-QDEnvironment.ps1 -NexusApiKey "{{NugetApiKey}}" -CertificateThumbprint "INSERT_CERTIFICATE_THUMBPRINT_HERE" -CertificateDnsName "INSERT_DNS_NAME_HERE"

# If you have the subject instead, run:
&amp; C:\choco-setup\files\Set-QDEnvironment.ps1 -NexusApiKey "{{NugetApiKey}}" -CertificateSubject "INSERT_CERTIFICATE_SUBJECT_HERE" -CertificateDnsName "INSERT_DNS_NAME_HERE"
</code></pre>
<p>Parameter descriptions are provided below for your convenience.
You can also call <code>Get-Help C:\choco-setup\files\Set-QDEnvironment.ps1 -Full</code> for more information.</p>
<table class="table">
<thead>
<tr>
<th style="text-align: left;">Parameter Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>-NexusApiKey</code></td>
<td style="text-align: left;">The api key for your nexus installation.</td>
</tr>
<tr>
<td style="text-align: left;"><code>-CertificateThumbprint</code></td>
<td style="text-align: left;">If using a thumbprint, specify it with this parameter.</td>
</tr>
<tr>
<td style="text-align: left;"><code>-CertificateSubject</code></td>
<td style="text-align: left;">If using a subject name for your certificate, specify it with this parameter (<strong>NOTE</strong> this does not include the 'CN=' portion of the subject returned by the certificate provider).</td>
</tr>
<tr>
<td style="text-align: left;"><code>-CertificateDnsName</code></td>
<td style="text-align: left;">If using a wildcard certificate this <em>must</em> be included with either <code>-CertificateThumbprint</code> or <code>-CertificateSubject</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>-InternetEnabled</code></td>
<td style="text-align: left;">When this parameter is used, the QDE Server is configured for internet-facing clients.</td>
</tr>
</tbody>
</table>
<h3 id="select-community-packages-to-internalize">4. Select Community Packages to Internalize</h3>
<blockquote class="blockquote">
<p>:memo: <strong>Note</strong></p>
<ul>
<li>If your environment is air-gapped or you have otherwise locked down access to the Community Repository, you will need to ensure the community repository is accessible for this part of the script to work.
It is completely optional, and you're more than welcome to skip this by selecting <strong>Cancel</strong> and only utilize the built in Jenkins tasks for internalization.</li>
<li>This will <strong>not</strong> currently update the builtin Jenkins configuration.
If you intend to setup automatic updates for Jenkins, you will need to use the Jenkins jobs</li>
</ul>
</blockquote>
<p>When the script completes, you will be shown an Out-GridView prompt where you can select any of the most popular community packages to automatically internalize.
Use <code>Shift</code> or <code>Ctrl</code> and click to select multiple.
When you're happy with your selections (don't worry, you can always use the built-in Jenkins tasks to internalize additional packages at any time) select OK, or select Cancel to opt-out.</p>
<p>This internalization will happen automatically in the background, and will generally take about a minute or two per package, depending on the size of the package.
We recommend you leave the VM running while it's happening; you can keep tabs on its progress by opening Nexus to the ChocolateyInternal repository and checking the available packages.</p>
<h2 id="step-3-review-configure-host-services">Step 3: Review &amp; Configure Host Services</h2>
<h3 id="nexus-repository">Nexus Repository</h3>
<blockquote class="blockquote">
<p>:memo: <strong>Note</strong></p>
<p>If you have changed the hostname from the default, or you're using a FQDN for the server setup, this hostname will have changed.
In that case, substitute the hostname for the new FQDN.</p>
</blockquote>
<table class="table">
<thead>
<tr>
<th style="text-align: center;">URL</th>
<th style="text-align: center;">Login</th>
<th style="text-align: center;">Initial Password</th>
<th style="text-align: center;">API Key</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><a href="https://chocoserver:8443">https://chocoserver:8443</a></td>
<td style="text-align: center;"><code>admin</code></td>
<td style="text-align: center;"><code>{{NexusPassword}}</code></td>
<td style="text-align: center;"><code>{{NugetApiKey}}</code></td>
</tr>
</tbody>
</table>
<p>If you have not setup QDE as internet-enabled, Nexus will be initially configured with anonymous authentication enabled.
On first logging in to the admin account, you will be prompted to change your password and then select whether or not to enable anonymous authentication going forward.
If you intend to set up QDE as an internet-facing server, we recommend you keep anonymous authentication <strong>OFF</strong>.
If your QDE instance will <strong>not</strong> be internet-facing and only used over a VPN or other secured network, it is generally safe to leave anonymous authentication turned on.</p>
<p>Unless security requirements in your organization stipulate that role-based access controls be in place, this is our recommended configuration for QDE in its default configuration.</p>
<p>Sources configured in Chocolatey can only read data from their remote endpoints, and cannot delete items.
If you need to limit the packages people have access to, control this with separate Hosted and Group repositories.
Consult the <a href="https://help.sonatype.com/repomanager3">Nexus documentation</a> or reach out to Chocolatey Support for more information.</p>
<h3 id="jenkins">Jenkins</h3>
<table class="table">
<thead>
<tr>
<th style="text-align: center;">URL</th>
<th style="text-align: center;">Login</th>
<th style="text-align: center;">Initial Password</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><a href="http://localhost:8080">http://localhost:8080</a></td>
<td style="text-align: center;"><code>admin</code></td>
<td style="text-align: center;"><code>{{JenkinsPassword}}</code></td>
</tr>
</tbody>
</table>
<p>For using Jenkins, please refer to our <a href="https://chocolatey.org/docs/how-to-setup-internal-package-repository">online documentation</a>.</p>
<p>At most, you will need to:</p>
<ol>
<li>Login to Jenkins and complete first-time setup (see below).</li>
<li>Change your password (by going to <code>People &gt; admin &gt; Configure</code> on the sidebar, scroll down to change password section).</li>
<li>Enable the pre-configured jobs to run on the schedule of your choosing.
Our documentation can assist with ensuring this is done correctly.</li>
</ol>
<details>
    <summary><strong>First-Time Setup</strong></summary>
<p>In order to begin using Jenkins, the following steps will need to be performed:</p>
<ol>
<li><p>Visit <a href="http://localhost:8080">http://localhost:8080</a> in a web browser</p>
</li>
<li><p>Enter the administrator password into the textbox and click <code>Continue</code></p>
</li>
<li><p>From the Plugin Installation Page select "Install Suggested Plugins"</p>
<blockquote class="blockquote">
<p>:memo: <strong>Note</strong></p>
<p>Some of these may fail to install, and that is OK.</p>
</blockquote>
</li>
<li><p>Once the plugin installation completes, select <code>Continue</code></p>
</li>
<li><p>Click <code>Continue As Admin</code> on the Create First Admin User page</p>
</li>
<li><p>Update the Jenkins URL <em>if</em> you have changed the hostname of the server prior to beginning with this setup document.</p>
</li>
<li><p>Click <code>Save and Finish</code></p>
</li>
<li><p>Click <code>Restart</code> to restart your Jenkins instance.
This <em>does</em> take a while.
If after 30 seconds you don't see your browser auto-refresh, go ahead and do so manually.</p>
</li>
</ol>
</details>
<h3 id="chocolatey-central-management">Chocolatey Central Management</h3>
<blockquote class="blockquote">
<p>:memo: <strong>Note</strong></p>
<p>If you have changed the hostname from the default, or you're using a FQDN for the server setup, this hostname will have changed.
In that case, substitute the hostname for the new FQDN.</p>
</blockquote>
<table class="table">
<thead>
<tr>
<th style="text-align: center;">URL</th>
<th style="text-align: center;">Login</th>
<th style="text-align: center;">Initial Password</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><a href="https://chocoserver:443">https://chocoserver:443</a></td>
<td style="text-align: center;"><code>ccmadmin</code></td>
<td style="text-align: center;"><code>123qwe</code></td>
</tr>
</tbody>
</table>
<h3 id="firewall-ports">Firewall ports</h3>
<p>To allow access to all services, the following firewall ports have been opened on QDE by default.</p>
<table class="table">
<thead>
<tr>
<th style="text-align: center;">Port</th>
<th style="text-align: left;">Service</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">8443</td>
<td style="text-align: left;">Nexus (HTTPS)</td>
</tr>
<tr>
<td style="text-align: center;">443</td>
<td style="text-align: left;">Central Management Dashboard (HTTPS)</td>
</tr>
<tr>
<td style="text-align: center;">24020</td>
<td style="text-align: left;">Central Management Service communications for Agent communication over HTTPS</td>
</tr>
<tr>
<td style="text-align: center;">80</td>
<td style="text-align: left;">QDE Certificate script endpoint (HTTP), to allow client machines to import the QDE HTTPS certificate.</td>
</tr>
</tbody>
</table>
<h3 id="browser-considerations">Browser Considerations</h3>
<p>We recommend you use either Mozilla Firefox or Google Chrome to interact with all Web interfaces for the different services installed.
You will find Google Chrome pre-installed in the environment.</p>
<blockquote class="blockquote">
<p>:warning: <strong>Warning</strong></p>
<p>There is a known issue in some QDE configurations where Firefox will be unable to load Nexus correctly.
If this occurs, you need to disable the <code>Block dangerous and deceptive content</code> option under <strong>Security</strong> in order to load Nexus.</p>
</blockquote>
<h2 id="step-4-change-the-api-key-recommended">Step 4: Change the API Key (Recommended)</h2>
<p>You may wish to change the API key before you start using things.
To do so, log in to Nexus using the information above, or your new credentials if you have already gone through the first run wizard.
Once logged in perform the following steps:</p>
<details>
    <summary>Click to show animated summary</summary>
<p><img src="/assets/images/gifs/choco_qde_update_apikey.gif" class="img-fluid" alt="changing the choco API key"></p>
</details>
<ol>
<li>Click on your username in the upper right-hand side of the homepage</li>
<li>Select <strong>NuGet API Key</strong> from the left-hand navigation window</li>
<li>Select <strong>Reset API Key</strong></li>
<li>Enter your password</li>
<li>Select <strong>Access API Key</strong></li>
<li>Enter your password again</li>
<li>Take note of the new API key</li>
</ol>
<p>If you change your API key, you will need to change the key in the Jenkins jobs that are pre-configured for you.
See the next section for information on how to connect to Jenkins.</p>
<h3 id="choco-apikey-command">Choco Apikey Command</h3>
<p>To help make pushing packages easier, the <code>choco apikey</code> command is available.
This will store your API key for a specific source as part of Chocolatey's configuration.
This will be encrypted. To setup, do the following:</p>
<blockquote class="blockquote">
<p>:memo: <strong>Note</strong></p>
<p>If you have changed the hostname from the default, or you're using a FQDN for the server setup, this hostname will have changed.
In that case, substitute the hostname for the new FQDN.</p>
</blockquote>
<pre><code class="language-powershell">choco apikey add --key="'{{NexusApiKey}}'" --source="'https://chocoserver:8443/repository/ChocolateyInternal/'"
</code></pre>
<h3 id="update-pre-configured-jenkins-jobs-with-the-new-api-key">Update pre-configured Jenkins jobs with the new API Key</h3>
<p>After updating the Nexus API Key, you'll need to ensure that the preconfigured Jenkins jobs are also updated with the new API key.
To do so:</p>
<ol>
<li>Login to Jenkins after completing the first-time setup (see <a href="#jenkins">above</a>)</li>
<li>For each of the pre-existing jobs shown (e.g., <code>Internalize packages from the Community Repository</code>), do the following:
<ol>
<li>Hover over the name of the job and select the drop-down arrow that shows up</li>
<li>Select <strong>:gear: Configure</strong></li>
<li>Scroll down until you see the <strong>Password Parameter</strong>; these will be named either <code>P_API_KEY</code>, <code>P_PROD_REPO_API_KEY</code>, or <code>P_LOCAL_REPO_API_KEY</code>, depending on the job you're editing</li>
<li>Select <strong>Change Password</strong> next to the <strong>:lock: Concealed</strong> Default Value</li>
<li>Replace the contents of the field with the new API key</li>
<li>Press the <strong>Save</strong> button at the bottom of the page</li>
</ol>
</li>
</ol>
<h2 id="step-5-install-and-configure-chocolatey-on-clients">Step 5: Install and Configure Chocolatey On Clients</h2>
<p>Refer to <a href="https://chocolatey.org/docs/quick-deployment-client-setup">the Client Setup documentation</a>.</p>
<h2 id="step-6-license-the-qde-vm">Step 6: License the QDE VM</h2>
<p>This VM is running an <strong>UNACTIVATED</strong> Server 2019 Standard Operating System.
If you plan to use this virtual machine long-term, you <em>will</em> need to apply a license to the VM.
If you use a KMS server in your environment, and have it configured on clients via Group Policy, you likely have nothing to do here, but verify.</p>
<p>If you rely on Retail or MAK licensing, you will need to apply the license using the following command, replacing the <code>x</code>'s with your actual product key:</p>
<blockquote class="blockquote">
<p>:memo: <strong>Note</strong></p>
<p>Please run the below from an administrative PowerShell session.</p>
</blockquote>
<pre><code class="language-powershell">slmgr.vbs /ipk xxxxx-xxxxx-xxxxx-xxxxx
</code></pre>
<h2 id="common-errors-and-resolutions">Common Errors and Resolutions</h2>
<blockquote class="blockquote">
<p>:memo: <strong>NOTE</strong></p>
<p>This document is for <strong>Version 2</strong> of the Quick Deployment Environment.
If you're using an older version of QDE, please refer to the [[document for that version|QuickDeploymentDesktopReadmeV1]].</p>
</blockquote>
<h3 id="server-error-warning-when-resetting-admin-credential-in-nexus">"Server Error" warning when resetting "admin" credential in Nexus</h3>
<p>When attempting to reset the <code>admin</code> account credential in Nexus, you receive a "Server Error" warning in the top right corner of the page, as shown below:</p>
<p><img src="/assets/images/quickdeploy/QDE-nexus-pw-error.png" class="img-fluid" alt="QDE Nexus pw error"></p>
<p>Though it may not be obvious, this is actually caused by Nexus not having enough disk space to function properly.
We sometimes see this occur if <a href="#step-1-expand-disk-size">Step 1: Expand Disk Size</a> was skipped.
Confirm that you have completed that step and then try again.</p>
<p>Keep in mind, this step is <strong>NOT</strong> the same as expanding the disk at the hypervisor level.
You will need to both expand the hypervisor disk space allocation, <em>and</em> expand the partition within the VM.</p>
<h3 id="context-menu-items-for-package-builder-and-package-uploader-not-available">Context menu items for Package Builder and Package Uploader not available</h3>
<p>When right-clicking an exe or msi file on QDE, you may notice that the context menu items for Package Builder are missing.
As well, when right-clicking on a nupkg file, you may also see the Package Uploader context menu entry is missing.
This feature can be controlled by passing a custom parameter when installing the Chocolatey Licensed Extension package, but can be restored to its default state quite simply.</p>
<p>Assuming the latest <code>chocolatey.extension.nupkg</code> is in your <code>C:\choco-setup\packages</code> folder, open up an Administrative PowerShell window and reinstall the Chocolatey Licensed Extension.
Then, restart Explorer for your changes to take effect immediately.</p>
<pre><code class="language-powershell">choco upgrade chocolatey.extension -y --source="'C:\choco-setup\packages'"
Stop-Process -Name explorer -Force
</code></pre>
<h2 id="see-also">See Also</h2>
<ul>
<li>[[Quick Deployment Environment|QuickDeploymentEnvironment]]</li>
<li>[[QDE Setup|QuickDeploymentSetup]]</li>
<li>[[QDE Desktop ReadMe File|QuickDeploymentDesktopReadme]]</li>
<li>[[QDE SSL/TLS Setup|QuickDeploymentSslSetup]]</li>
<li>[[QDE Firewall Changes|QuickDeploymentFirewallChanges]]</li>
<li>[[QDE Client Setup|QuickDeploymentClientSetup]] (setting up your client machines)</li>
</ul>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                <p class="text-muted">
    Copyright © Chocolatey Software, Inc.
    <br>
    Website generated by <a href="http://wyam.io" target="_blank">Wyam</a>
</p>

            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        <a class="github-button" href="https://github.com/chocolatey/choco" target="_blank">
    <i class="fa fa-github"></i>
    GitHub
</a>
<script>
    ((window.gitter = {}).chat = {}).options = {
        room: 'chocolatey/choco'
    };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script>

<script type="text/javascript" src="/assets/js/anchor.min.js"></script>
<script type="text/javascript" src="/assets/js/clipboard.min.js"></script>
<script type="text/javascript">
    anchors.options.placement = 'left';
    anchors.add();

    var snippets = document.querySelectorAll("pre > code");
    [].forEach.call(snippets, function(snippet) {
        snippet.insertAdjacentHTML("beforebegin", "<button class='btn-copy' data-clipboard-snippet><img class='clippy' width=13 src='/assets/images/clippy.svg' alt='Copy to clipboard'></button>");
    });
    var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
        target: function(trigger) {
            return trigger.nextElementSibling;
        }
    });
    clipboardSnippets.on('success', function(e) {
        e.clearSelection();
        showTooltip(e.trigger, "Copied!");
    });
    clipboardSnippets.on('error', function(e) {
        showTooltip(e.trigger, fallbackMessage(e.action));
    });
    var btns = document.querySelectorAll('.btn-copy');
    for (var i = 0; i < btns.length; i++) {
        btns[i].addEventListener('mouseleave', function(e) {
            e.currentTarget.setAttribute('class', 'btn-copy');
            e.currentTarget.removeAttribute('aria-label');
        });
    }
    function showTooltip(elem, msg) {
        elem.setAttribute('class', 'btn-copy tooltipped tooltipped-s');
        elem.setAttribute('aria-label', msg);
    }
    function fallbackMessage(action) {
        var actionMsg = '';
        var actionKey = (action === 'cut' ? 'X' : 'C');
        if (/iPhone|iPad/i.test(navigator.userAgent)) {
            actionMsg = 'No support :(';
        } else if (/Mac/i.test(navigator.userAgent)) {
            actionMsg = 'Press ⌘-' + actionKey + ' to ' + action;
        } else {
            actionMsg = 'Press Ctrl-' + actionKey + ' to ' + action;
        }
        return actionMsg;
    }
</script>
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });     
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});			                          

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();
                    
                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });

            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    
</body></html>