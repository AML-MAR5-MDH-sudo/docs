<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link href="/assets/css/styles.css" rel="stylesheet" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,700" data-no-mirror>

        <title>Chocolatey - Create Custom Package Templates</title>
    </head>
    <body class="d-flex flex-column">
        <div class="flex-grow-1 d-flex flex-column">

            <nav id="topnav" class="navbar navbar-expand-lg navbar-light">
                <div class="container py-3">
                    <a class="navbar-brand" href="/"><img id="logo" src="/assets/logo.svg" alt="Chocolatey" /> Chocolatey</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarText">
                        <ul class="navbar-nav mr-auto">
                        </ul>
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link font-weight-light font-size-lg" href="https://github.com/chocolatey/docs"><i class="fab fa-github"></i> GitHub</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>


            <div class="flex-grow-1 d-flex  bg-body flex-column section-docs">
                    <div id="titlebar" class="py-4">
                        <div class="container">
                            <div class="row">
                                <div class="offset-md-3 offset-lg-2 px-3 px-md-0">
                                    <div class="section text-uppercase">Chocolatey</div>
                                    <div class="text-white m-0 title">Create Custom Package Templates</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="undertitle">
                        <div class="container bg-body">
                            <div class="row">
                                    <div class="col-md-3 col-lg-2 bg-body">
                                    </div>
                                    <div class="col-md-9 col-lg-8 bg-white">
                                    </div>
                                <div class="col-lg-2 d-none d-lg-block bg-section">
                                </div>
                            </div>
                        </div>
                    </div>

                <div class="flex-grow-1 d-flex flex-column bg-body">
                        <div class="container flex-grow-1 d-flex flex-column bg-white">
                            <div class="row flex-grow-1 align-items-stretch">
                                    <div class="sidebar col-md-3 col-lg-2 pt-2 bg-body">
                                            <div class="sidebar-nav-item">
<a href="/en-us">Chocolatey - Software Management for Windows</a>                                            </div>
                                                <div class="sidebar-nav-item">
<a href="/en-us/why">Why Chocolatey?</a>                                                </div>
                                                <div class="sidebar-nav-item">
<a href="/en-us/security">Security</a>                                                </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/features">Features</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/features/free">Free</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/features/paid">Paid</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/general">General</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/general/release-notes">Release Notes</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/general/troubleshooting">Troubleshooting</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/general/faqs">FAQs</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/general/moderation">Chocolatey.org Moderation</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/general/community-packages-disclaimer">Chocolatey.org Packages Disclaimer</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/usage">Usage</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/usage/installation">How to install</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/usage/installation-licensed">How to install licensed edition</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/usage/chocolatey-configuration">Configuration/chocolatey.config</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/usage/uninstallation">How to uninstall</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/usage/getting-started">Getting Started</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/usage/commands">Commands</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/creating-packages">Creating Packages</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/creating-packages/create-packages">Create Packages</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/creating-packages/create-packages-quick-start">Quick Start</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/creating-packages/commands">Commands</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/creating-packages/helpers">PowerShell Reference</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/creating-packages/automatic-packages">Automatic Packaging</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/how-tos">How To&#x27;s</a>                                                </div>
                                                    <div class="sidebar-nav-children active">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/proxy-settings-for-chocolatey">Use Chocolatey w/Proxy Server</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/change-cache">Change Download Cache Location aka Don&#x27;t use TEMP for downloads</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/install-upgrade-package-without-scripts">Install/Upgrade a Package w/out running install scripts</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/package-triage-process">Request Package Fixes/Updates</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/recompile-packages">Manually Recompile Packages, Embedding/Internalizing Remote Resources</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/package-maintainer-handover">Take Over Package Maintenance Exclusively</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/parse-packageparameters-argument">Parse Package Parameters</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/mount-an-iso-in-chocolatey-package">Mount Iso</a>
                                                            </div>
                                                            <div class="sidebar-nav-child active">
                                                                <a href="/en-us/how-tos/create-custom-package-templates">Create Custom Package Templates</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/create-extensions">Extend Chocolatey With PowerSHell Modules (extensions)</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/deprecate-a-chocolatey-package">Deprecate a Package</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/set-up-chocolatey-server">Set up the Chocolatey.Server</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/setup-offline-installation">Set up Chocolatey for Internal/organizational use</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/setup-internal-package-repository">Automate Package Internalizer (MSP/C4B)</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/chocolatey-for-business-quick-start-guide">C4B Quick Start Guide</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/chocolatey-gui">Chocolatey GUI</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/chocolatey-gui/overview">Chocolatey GUI Overview</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/chocolatey-gui/known-issues">Chocolatey GUI Known Issues</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/quick-deployment">Quick Deployment Environment (QDE) Overview</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/quick-deployment/setup">Setup</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/quick-deployment/desktop-readme">Desktop Readme</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/quick-deployment/ssl-setup">SSL Setup</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/quick-deployment/firewall-changes">Firewall Changes</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/quick-deployment/client-setup">Client Setup</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/quick-deployment/internet-setup">Internet Setup</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/quick-deployment/v1">QDE v1</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/central-management">Central Management Overview</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/central-management/setup">Central Management Setup</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/central-management/setup-client">Central Management Client Setup</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/central-management/setup-upgrade">Central Management Upgrade</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/central-management/deployments">Central Management Deployments</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/use-cases">Use Cases</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/use-cases/development-environment-setup">Development Environment</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/use-cases/hosting-chocolatey-packages-on-myget">Host on MyGet</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/learning-resources">Learning Resources</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/learning-resources/resources">Resources</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/learning-resources/videos">Videos</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/learning-resources/presentations">Presentations</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/additional-information">Additional Information</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/additional-information/legal">Legal</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/additional-information/history">History</a>
                                                            </div>
                                                    </div>
                                    </div>
                                    <div class="col-md-9 col-lg-8 pt-4 pt-md-0 pb-4 px-4">
                                        <h1 id="create-your-own-custom-package-templates">Create Your Own Custom Package Templates</h1>
<p>As of <a href="https://github.com/chocolatey/choco/issues/76">choco 0.9.9.9</a>, you can create your own custom package templates when the built-in template is not enough.</p>
<!-- TOC -->
<ul>
<li><a href="#overview">Overview</a>
<ul>
<li><a href="#where-do-templates-go">Where Do Templates Go?</a></li>
<li><a href="#can-i-replace-the-built-in-template">Can I replace the built-in template?</a></li>
<li><a href="#what-values-can-i-template">What values can I template?</a></li>
</ul>
</li>
<li><a href="#example">Example</a>
<ul>
<li><a href="#manage-as-templates-as-packages">Manage as Templates as Packages</a></li>
<li><a href="#extending-templates">Extending Templates</a></li>
<li><a href="#are-there-planned-enhancements">Are There Planned Enhancements?</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h2 id="overview">Overview</h2>
<p>A template is used for creating packages. Chocolatey (choco) has a built-in template that it uses when generating a new package from the command <a href="../usage/commands/new"><code>choco new</code></a>.</p>
<h3 id="where-do-templates-go">Where Do Templates Go?</h3>
<p>If you drop a template into <code>$env:ChocolateyInstall\templates</code> folder, you can use <code>-t name_of_template</code> to generate a choco template based on that. So for:</p>
<p><img src="https://cloud.githubusercontent.com/assets/63502/9952997/0603b334-5da2-11e5-8b6d-65a5dbf5d8e0.png" alt="image" /></p>
<p>You would call <code>choco new pkgname -t organization</code> and choco will use the template folder instead of the built-in template.</p>
<h3 id="can-i-replace-the-built-in-template">Can I replace the built-in template?</h3>
<p>To replace the built-in template, you should put a folder in the template with the name of &quot;default&quot;. Then choco will use that instead of the built-in template with no need to specify a template name.</p>
<h3 id="what-values-can-i-template">What values can I template?</h3>
<p>You can get the names by running <code>choco new -h</code>:</p>
<pre><code>Possible properties to pass:
    packageversion
    maintainername
    maintainerrepo
    installertype
    url
    url64
    silentargs
</code></pre>
<p>However <code>PackageName</code> and <code>PackageNameLower</code> also show up as they are based on the name of the package that you pass e.g. &quot;bob&quot; in <code>choco new bob</code></p>
<p>Then you surround those templated values with <code>[[]]</code> to make them templated for choco to use.</p>
<p><strong>NOTE</strong>: You can set and pass arbitrary values through as well. This is shown in the example with <code>CustomValue</code>.</p>
<h2 id="example">Example</h2>
<p>This is a template for embedding an MSI into a package. This removes almost everything that is unnecessary for embedding software into packages. And because the autoUninstaller handles MSIs without an issue, we don't need a chocolateyUninstall.ps1.</p>
<p>A file with the extension <code>.nuspec</code>:</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;package xmlns=&quot;http://schemas.microsoft.com/packaging/2015/06/nuspec.xsd&quot;&gt;
  &lt;metadata&gt;
    &lt;id&gt;[[PackageNameLower]]&lt;/id&gt;
    &lt;title&gt;[[PackageName]] (Install)&lt;/title&gt;
    &lt;version&gt;[[PackageVersion]]&lt;/version&gt;
    &lt;authors&gt;Original authors&lt;/authors&gt;
    &lt;owners&gt;[[MaintainerName]]&lt;/owners&gt;
    &lt;description&gt;__REPLACE__MarkDown_Okay [[AutomaticPackageNotesNuspec]]
    &lt;/description&gt;
    &lt;tags&gt;[[PackageNameLower]] admin&lt;/tags&gt;
    &lt;!--&lt;dependencies&gt;
      &lt;dependency id=&quot;&quot; version=&quot;__VERSION__&quot; /&gt;
      &lt;dependency id=&quot;&quot; /&gt;
    &lt;/dependencies&gt;--&gt;
  &lt;/metadata&gt;
  &lt;files&gt;
    &lt;file src=&quot;tools\**&quot; target=&quot;tools&quot; /&gt;
  &lt;/files&gt;
&lt;/package&gt;
</code></pre>
<p><code>tools\chocolateyInstall.ps1</code>:</p>
<pre><code class="language-powershell"># Custom value: [[CustomValue]]
$ErrorActionPreference = 'Stop'; # stop on all errors

[[AutomaticPackageNotesInstaller]]
$packageName  = '[[PackageName]]'
$toolsDir     = &quot;$(Split-Path -parent $MyInvocation.MyCommand.Definition)&quot;
$fileLocation = Join-Path $toolsDir 'NAME_OF_EMBEDDED_INSTALLER_FILE'

$packageArgs = &#64;{
  packageName   = $packageName
  file          = $fileLocation
  fileType      = '[[InstallerType]]' #only one of these: exe, msi, msu

  #MSI
  silentArgs    = &quot;/qn /norestart /l*v `&quot;$env:TEMP\chocolatey\$($packageName)\$($packageName).MsiInstall.log`&quot;&quot;
  validExitCodes= &#64;(0, 3010, 1641)
  #OTHERS
  #silentArgs   ='[[SilentArgs]]' # /s /S /q /Q /quiet /silent /SILENT /VERYSILENT -s - try any of these to get the silent installer
  #validExitCodes= &#64;(0) #please insert other valid exit codes here
}

Install-ChocolateyInstallPackage &#64;packageArgs
</code></pre>
<p>Once installed, call this with <code>choco new test -t mytemplatename CustomValue=Yes</code></p>
<h3 id="manage-as-templates-as-packages">Manage as Templates as Packages</h3>
<p>If you have Chocolatey v0.9.10+, then you can manage templates as packages themselves, allowing you to upgrade a template when a new version is available. When it comes to packaging templates, Chocolatey takes a conventional approach. You must create a package with the suffix &quot;.template&quot; and have a templates folder.</p>
<p>To manage a template as a package, create a new package with the name &quot;templatename.template&quot;. The name of the package minus the &quot;.template&quot; will be the name of the template.</p>
<p>Then create a templates folder. This is where the template goes. the only thing to remember is that the nuspec file created here must end in &quot;.template&quot; as a Chocolatey package allows only one nuspec file.</p>
<p>Here's an example: <a href="https://chocolatey.org/packages/zip.template">https://chocolatey.org/packages/zip.template</a>. The source is at <a href="https://github.com/ferventcoder/chocolatey-packages/tree/master/manual/zip.template">https://github.com/ferventcoder/chocolatey-packages/tree/master/manual/zip.template</a></p>
<p>Yes, it is really that easy. Enjoy!</p>
<h3 id="extending-templates">Extending Templates</h3>
<p>Walmart has a really good post on extending package templates. You can read that at <a href="https://chocolatey.org/blog/extending-chocolatey-packaging-at-walmart">https://chocolatey.org/blog/extending-chocolatey-packaging-at-walmart</a></p>
<h3 id="are-there-planned-enhancements">Are There Planned Enhancements?</h3>
<ul>
<li>List Template names - <a href="https://github.com/chocolatey/choco/issues/449">https://github.com/chocolatey/choco/issues/449</a></li>
</ul>

                                    </div>
                                <div class="col-lg-2 d-none d-lg-block bg-body pl-3 pt-3">
                                            <div class="border-bottom mb-3">
                                                <p class="small font-weight-bold">On This Page</p>
                                                    <p class="small"><a href="#create-your-own-custom-package-templates">Create Your Own Custom Package Templates</a></p>
                                                    <p class="small"><a href="#overview">Overview</a></p>
                                                    <p class="small"><a href="#where-do-templates-go">Where Do Templates Go?</a></p>
                                                    <p class="small"><a href="#can-i-replace-the-built-in-template">Can I replace the built-in template?</a></p>
                                                    <p class="small"><a href="#what-values-can-i-template">What values can I template?</a></p>
                                                    <p class="small"><a href="#example">Example</a></p>
                                                    <p class="small"><a href="#manage-as-templates-as-packages">Manage as Templates as Packages</a></p>
                                                    <p class="small"><a href="#extending-templates">Extending Templates</a></p>
                                                    <p class="small"><a href="#are-there-planned-enhancements">Are There Planned Enhancements?</a></p>
                                            </div>
                                        <p class="small font-weight-bold"><a href="https://github.com/chocolatey/docs/edit/master/input/en-us/how-tos/create-custom-package-templates.md"><i class="fad fa-pencil"></i> Edit This Page</a></p>
                                </div>
                            </div>
                        </div>
                </div>
            </div>
        </div>
        <div id="footer" class="p-3 text-white font-size-sm">
            <div class="container">
                <div>
                    <span>© 2020 Chocolatey Software, Inc.</span>
                    <span class="float-right" style="color: #888888;">0.0.0-preview.0.83</span>
                </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script type="text/javascript" src="/assets/js/bootstrap.bundle.min.js"></script>
        <script src="https://kit.fontawesome.com/a1cad7ed9a.js" crossorigin="anonymous" data-no-mirror></script>
        <script type="text/javascript" src="/assets/js/prism.min.js"></script>
        <script type="text/javascript" src="/assets/js/anchor.min.js"></script>
        <script type="text/javascript" src="/assets/js/custom.js"></script>
        <script>
            ((window.gitter = {}).chat = {}).options = {
                room: 'chocolatey/choco'
            };
        </script>
        <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
    </body>
</html>