<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link href="/assets/bootstrap/bootstrap.css" rel="stylesheet" />
        <link href="/assets/css/styles.css" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Roboto+Slab:wght@400;700&family=Roboto:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap" rel="stylesheet" data-no-mirror>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.19.0/themes/prism.css">

        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <script src="https://kit.fontawesome.com/a1cad7ed9a.js" crossorigin="anonymous" data-no-mirror></script>
        <script src="https://cdn.jsdelivr.net/npm/mermaid@8.4.8/dist/mermaid.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.19.0/components/prism-core.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/prismjs@1.19.0/plugins/autoloader/prism-autoloader.min.js" data-no-mirror></script>
        <script type="text/javascript" src="/assets/js/clipboard.min.js"></script>
        <script type="text/javascript" src="/assets/js/anchor.min.js"></script>

        <title>Chocolatey - Desktop Readme</title>
    </head>
    <body class="d-flex flex-column">
        <div class="flex-grow-1 d-flex flex-column">

            <nav id="topnav" class="navbar navbar-expand-lg navbar-light">
                <div class="container py-3">
                    <a class="navbar-brand" href="/"><img id="logo" src="/assets/logo.svg" alt="Chocolatey" /> Chocolatey</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarText">
                        <ul class="navbar-nav mr-auto">
                        </ul>
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link font-weight-light font-size-lg" href="https://github.com/chocolatey/docs"><i class="fab fa-github"></i> GitHub</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>


            <div class="flex-grow-1 d-flex  bg-body flex-column section-docs">
                    <div id="titlebar" class="py-4">
                        <div class="container">
                            <div class="row">
                                <div class="offset-md-3 offset-lg-2 px-3 px-md-0">
                                    <div class="section text-uppercase">Chocolatey</div>
                                    <div class="text-white m-0 title">Desktop Readme</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="undertitle">
                        <div class="container bg-body">
                            <div class="row">
                                    <div class="col-md-3 col-lg-2 bg-body">
                                    </div>
                                    <div class="col-md-9 col-lg-8 bg-white">
                                    </div>
                                <div class="col-lg-2 d-none d-lg-block bg-section">
                                </div>
                            </div>
                        </div>
                    </div>

                <div class="flex-grow-1 d-flex flex-column bg-body">
                        <div class="container flex-grow-1 d-flex flex-column bg-white">
                            <div class="row flex-grow-1 align-items-stretch">
                                    <div class="sidebar col-md-3 col-lg-2 pt-2 bg-body">
                                            <div class="sidebar-nav-item">
<a href="/en-us">Chocolatey - Software Management for Windows</a>                                            </div>
                                                <div class="sidebar-nav-item">
<a href="/en-us/why">Why Chocolatey?</a>                                                </div>
                                                <div class="sidebar-nav-item">
<a href="/en-us/security">Security</a>                                                </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/features">Features</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/features/free">Free</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/features/paid">Paid</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/general">General</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/general/release-notes">Release Notes</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/general/troubleshooting">Troubleshooting</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/general/faqs">FAQs</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/general/moderation">Chocolatey.org Moderation</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/general/community-packages-disclaimer">Chocolatey.org Packages Disclaimer</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/usage">Usage</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/usage/installation">How to install</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/usage/installation-licensed">How to install licensed edition</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/usage/chocolatey-configuration">Configuration/chocolatey.config</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/usage/uninstallation">How to uninstall</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/usage/getting-started">Getting Started</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/usage/commands">Commands</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/creating-packages">Creating Packages</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/creating-packages/create-packages">Create Packages</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/creating-packages/create-packages-quick-start">Quick Start</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/creating-packages/commands">Commands</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/creating-packages/helpers">PowerShell Reference</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/creating-packages/automatic-packages">Automatic Packaging</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/how-tos">How To&#x27;s</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/proxy-settings-for-chocolatey">Use Chocolatey w/Proxy Server</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/change-cache">Change Download Cache Location aka Don&#x27;t use TEMP for downloads</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/install-upgrade-package-without-scripts">Install/Upgrade a Package w/out running install scripts</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/package-triage-process">Request Package Fixes/Updates</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/recompile-packages">Manually Recompile Packages, Embedding/Internalizing Remote Resources</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/package-maintainer-handover">Take Over Package Maintenance Exclusively</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/parse-packageparameters-argument">Parse Package Parameters</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/mount-an-iso-in-chocolatey-package">Mount Iso</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/create-custom-package-templates">Create Custom Package Templates</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/create-extensions">Extend Chocolatey With PowerSHell Modules (extensions)</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/deprecate-a-chocolatey-package">Deprecate a Package</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/set-up-chocolatey-server">Set up the Chocolatey.Server</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/setup-offline-installation">Set up Chocolatey for Internal/organizational use</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/setup-internal-package-repository">Automate Package Internalizer (MSP/C4B)</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/how-tos/chocolatey-for-business-quick-start-guide">C4B Quick Start Guide</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/chocolatey-gui">Chocolatey GUI</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/chocolatey-gui/overview">Chocolatey GUI Overview</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/chocolatey-gui/known-issues">Chocolatey GUI Known Issues</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/quick-deployment">Quick Deployment Environment (QDE) Overview</a>                                                </div>
                                                    <div class="sidebar-nav-children active">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/quick-deployment/setup">Setup</a>
                                                            </div>
                                                            <div class="sidebar-nav-child active">
                                                                <a href="/en-us/quick-deployment/desktop-readme">Desktop Readme</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/quick-deployment/ssl-setup">SSL Setup</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/quick-deployment/firewall-changes">Firewall Changes</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/quick-deployment/client-setup">Client Setup</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/quick-deployment/internet-setup">Internet Setup</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/quick-deployment/v1">QDE v1</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/central-management">Central Management Overview</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/central-management/setup">Central Management Setup</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/central-management/setup-client">Central Management Client Setup</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/central-management/setup-upgrade">Central Management Upgrade</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/central-management/deployments">Central Management Deployments</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/use-cases">Use Cases</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/use-cases/development-environment-setup">Development Environment</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/use-cases/hosting-chocolatey-packages-on-myget">Host on MyGet</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/learning-resources">Learning Resources</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/learning-resources/resources">Resources</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/learning-resources/videos">Videos</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/learning-resources/presentations">Presentations</a>
                                                            </div>
                                                    </div>
                                                <div class="sidebar-nav-item has-children">
<a href="/en-us/additional-information">Additional Information</a>                                                </div>
                                                    <div class="sidebar-nav-children">
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/additional-information/legal">Legal</a>
                                                            </div>
                                                            <div class="sidebar-nav-child">
                                                                <a href="/en-us/additional-information/history">History</a>
                                                            </div>
                                                    </div>
                                    </div>
                                    <div class="col-md-9 col-lg-8 pt-4 pt-md-0 pb-4 px-4">
                                        <h1 id="chocolatey-quick-deployment-environment-readme">Chocolatey Quick Deployment Environment README</h1>
<blockquote>
<p>:memo: <strong>NOTE</strong></p>
<p>This document is for <strong>Version 2</strong> of the Quick Deployment Environment.
If you're using an older version of QDE, please refer to the <a href="./v1/desktop-readme">QDEv1 Desktop Readme page</a>.</p>
</blockquote>
<p>Thanks for trying Chocolatey for Business!
This system has been pre-configured as a fully functioning C4B environment.
To finish setting up QDE (Quick Deployment Environment), you'll need to closely follow the steps outlined in this document.</p>
<!-- TOC depthFrom:2 -->
<ul>
<li><a href="#summary">Summary</a></li>
<li><a href="#step-0-complete-prerequisites">Step 0: Complete Prerequisites</a></li>
<li><a href="#step-1-expand-disk-size">Step 1: Expand Disk Size</a></li>
<li><a href="#step-2-environment-setup">Step 2: Environment Setup</a>
<ul>
<li><a href="#1-add-your-chocolatey-license">1. Add Your Chocolatey License</a></li>
<li><a href="#2-optional-change-the-vm-hostname">2. (Optional) Change the VM Hostname</a></li>
<li><a href="#3-run-the-set-qdenvironmentps1-script">3. Run the Set-QDEnvironment.ps1 Script</a>
<ul>
<li><a href="#option-1-default-self-signed-certificate">Option 1: Default Self-Signed Certificate</a></li>
<li><a href="#option-2-custom-certificate">Option 2: Custom Certificate</a></li>
</ul>
</li>
<li><a href="#4-select-community-packages-to-internalize">4. Select Community Packages to Internalize</a></li>
</ul>
</li>
<li><a href="#step-3-review--configure-host-services">Step 3: Review &amp; Configure Host Services</a>
<ul>
<li><a href="#nexus-repository">Nexus Repository</a></li>
<li><a href="#jenkins">Jenkins</a></li>
<li><a href="#chocolatey-central-management">Chocolatey Central Management</a></li>
<li><a href="#firewall-ports">Firewall ports</a></li>
<li><a href="#browser-considerations">Browser Considerations</a></li>
</ul>
</li>
<li><a href="#step-4-change-the-api-key-recommended">Step 4: Change the API Key (Recommended)</a>
<ul>
<li><a href="#choco-apikey-command">Choco Apikey Command</a></li>
<li><a href="#update-pre-configured-jenkins-jobs-with-the-new-api-key">Update pre-configured Jenkins jobs with the new API Key</a></li>
</ul>
</li>
<li><a href="#step-5-install-and-configure-chocolatey-on-clients">Step 5: Install and Configure Chocolatey On Clients</a></li>
<li><a href="#step-6-license-the-qde-vm">Step 6: License the QDE VM</a></li>
<li><a href="#common-errors-and-resolutions">Common Errors and Resolutions</a>
<ul>
<li><a href="#server-error-warning-when-resetting-admin-credential-in-nexus">&quot;Server Error&quot; warning when resetting &quot;admin&quot; credential in Nexus</a></li>
<li><a href="#context-menu-items-for-package-builder-and-package-uploader-not-available">Context menu items for Package Builder and Package Uploader not available</a></li>
</ul>
</li>
<li><a href="#see-also">See Also</a></li>
</ul>
<!-- /TOC -->
<h2 id="summary">Summary</h2>
<blockquote>
<p>:warning: <strong>Warning</strong></p>
<ul>
<li>The commands outlined in this document need to be run from an administrative PowerShell session.
Many of these scripts will function poorly or not at all in a non-administrative shell.</li>
<li>Ensure you go through these steps in <strong>exact</strong> order.
If you miss out on a step or two, and something breaks, it's very likely you'll need to re-import the QDE VM from scratch and start over.
You may want to take a snapshot before continuing just in case.</li>
</ul>
</blockquote>
<p>To finish setting up QDE (Quick Deployment Environment), you'll need to work through this document and run the different commands you find here.</p>
<p>If you run into any issues as you set up your QDE and clients, please reach out to support and we can set up a session to work with you on this.</p>
<h2 id="step-0-complete-prerequisites">Step 0: Complete Prerequisites</h2>
<p>There are some initial steps you will need to have taken before you work through this document.
Please make sure you have taken those steps ahead of time.
See the <a href="./setup#step-3-virtual-environment-setup">Online Documentation</a> for the most up to date information.</p>
<ul>
<li><a href="./setup">QDE Setup</a></li>
</ul>
<h2 id="step-1-expand-disk-size">Step 1: Expand Disk Size</h2>
<p>By default, QDE is provisioned with a 100GB hard disk drive.
We typically recommend around 2TB of storage space to be available for a package repository server, which is part of QDE's services.
Before starting the VM, you may want to expand the hard drive to a size suitable for your purposes.
After starting the VM, you can run the below command to resize the Windows partition to fill any additional available space you have allocated.</p>
<pre><code class="language-powershell">Resize-Partition -DriveLetter C -Size ((Get-PartitionSupportedSize -DriveLetter C).SizeMax)
</code></pre>
<h2 id="step-2-environment-setup">Step 2: Environment Setup</h2>
<h3 id="add-your-chocolatey-license">1. Add Your Chocolatey License</h3>
<p>Copy your Chocolatey license file to: <code>C:\ProgramData\chocolatey\license\chocolatey.license.xml</code></p>
<h3 id="optional-change-the-vm-hostname">2. (Optional) Change the VM Hostname</h3>
<p>If you would like to change the hostname of this VM, please do so <strong>before</strong> going any further with setup.</p>
<h3 id="run-the-set-qdenvironment.ps1-script">3. Run the Set-QDEnvironment.ps1 Script</h3>
<p>First, you'll need to open PowerShell as Administrator.</p>
<h4 id="option-1-default-self-signed-certificate">Option 1: Default Self-Signed Certificate</h4>
<p>This is the standard method of setup, and will initialize all the services using a newly-generated self-signed certificate.
Enter the following command:</p>
<pre><code class="language-powershell">&amp; C:\choco-setup\files\Set-QDEnvironment.ps1 -NexusApiKey &quot;{{NugetApiKey}}&quot;
</code></pre>
<h4 id="option-2-custom-certificate">Option 2: Custom Certificate</h4>
<p>If you have a domain certificate or you have otherwise already created / obtained a certificate you'd like to use,
please ensure the certificate is present in either the <code>Cert:\LocalMachine\My</code> or <code>Cert:\LocalMachine\TrustedPeople</code> stores before continuing.
If you're not familiar with how to do this, please refer to <a href="https://www.digicert.com/kb/managing-client-certificates.htm">this DigiCert article for instructions</a>.</p>
<blockquote>
<p>:warning: <strong>Warning</strong></p>
<p>The private key of the certificate you're using <strong>must</strong> be exportable.
If it is not, configuring Nexus will fail, as Nexus does not work with the Windows certificate store directly and maintains its own certificate store.</p>
</blockquote>
<p>You will need either the certificate thumbprint or the subject in order to use the certificate for setup:</p>
<blockquote>
<p>:memo: <strong>Note</strong></p>
<ul>
<li><code>-CertificateDnsName</code> is optional if you're providing the <code>-CertificateSubject</code>, but only if the subject does <strong>not</strong> contain wildcards.</li>
<li>You can also optionally provide the <code>-InternetEnabled</code> switch if your QDE instance has a certificate with a public hostname and will be operating over the internet.
This will enable additional security features; take note of the additional output and do not lose the newly-generated passwords or salt values.</li>
</ul>
</blockquote>
<pre><code class="language-powershell"># If you have the thumbprint, run:
&amp; C:\choco-setup\files\Set-QDEnvironment.ps1 -NexusApiKey &quot;{{NugetApiKey}}&quot; -CertificateThumbprint &quot;INSERT_CERTIFICATE_THUMBPRINT_HERE&quot; -CertificateDnsName &quot;INSERT_DNS_NAME_HERE&quot;

# If you have the subject instead, run:
&amp; C:\choco-setup\files\Set-QDEnvironment.ps1 -NexusApiKey &quot;{{NugetApiKey}}&quot; -CertificateSubject &quot;INSERT_CERTIFICATE_SUBJECT_HERE&quot; -CertificateDnsName &quot;INSERT_DNS_NAME_HERE&quot;
</code></pre>
<p>Parameter descriptions are provided below for your convenience.
You can also call <code>Get-Help C:\choco-setup\files\Set-QDEnvironment.ps1 -Full</code> for more information.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Parameter Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>-NexusApiKey</code></td>
<td style="text-align: left;">The api key for your nexus installation.</td>
</tr>
<tr>
<td style="text-align: left;"><code>-CertificateThumbprint</code></td>
<td style="text-align: left;">If using a thumbprint, specify it with this parameter.</td>
</tr>
<tr>
<td style="text-align: left;"><code>-CertificateSubject</code></td>
<td style="text-align: left;">If using a subject name for your certificate, specify it with this parameter (<strong>NOTE</strong> this does not include the 'CN=' portion of the subject returned by the certificate provider).</td>
</tr>
<tr>
<td style="text-align: left;"><code>-CertificateDnsName</code></td>
<td style="text-align: left;">If using a wildcard certificate this <em>must</em> be included with either <code>-CertificateThumbprint</code> or <code>-CertificateSubject</code>.</td>
</tr>
<tr>
<td style="text-align: left;"><code>-InternetEnabled</code></td>
<td style="text-align: left;">When this parameter is used, the QDE Server is configured for internet-facing clients.</td>
</tr>
</tbody>
</table>
<h3 id="select-community-packages-to-internalize">4. Select Community Packages to Internalize</h3>
<blockquote>
<p>:memo: <strong>Note</strong></p>
<ul>
<li>If your environment is air-gapped or you have otherwise locked down access to the Community Repository, you will need to ensure the community repository is accessible for this part of the script to work.
It is completely optional, and you're more than welcome to skip this by selecting <strong>Cancel</strong> and only utilize the built in Jenkins tasks for internalization.</li>
<li>This will <strong>not</strong> currently update the builtin Jenkins configuration.
If you intend to setup automatic updates for Jenkins, you will need to use the Jenkins jobs</li>
</ul>
</blockquote>
<p>When the script completes, you will be shown an Out-GridView prompt where you can select any of the most popular community packages to automatically internalize.
Use <code>Shift</code> or <code>Ctrl</code> and click to select multiple.
When you're happy with your selections (don't worry, you can always use the built-in Jenkins tasks to internalize additional packages at any time) select OK, or select Cancel to opt-out.</p>
<p>This internalization will happen automatically in the background, and will generally take about a minute or two per package, depending on the size of the package.
We recommend you leave the VM running while it's happening; you can keep tabs on its progress by opening Nexus to the ChocolateyInternal repository and checking the available packages.</p>
<h2 id="step-3-review-configure-host-services">Step 3: Review &amp; Configure Host Services</h2>
<h3 id="nexus-repository">Nexus Repository</h3>
<blockquote>
<p>:memo: <strong>Note</strong></p>
<p>If you have changed the hostname from the default, or you're using a FQDN for the server setup, this hostname will have changed.
In that case, substitute the hostname for the new FQDN.</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align: center;">URL</th>
<th style="text-align: center;">Login</th>
<th style="text-align: center;">Initial Password</th>
<th style="text-align: center;">API Key</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><a href="https://chocoserver:8443">https://chocoserver:8443</a></td>
<td style="text-align: center;"><code>admin</code></td>
<td style="text-align: center;"><code>{{NexusPassword}}</code></td>
<td style="text-align: center;"><code>{{NugetApiKey}}</code></td>
</tr>
</tbody>
</table>
<p>If you have not setup QDE as internet-enabled, Nexus will be initially configured with anonymous authentication enabled.
On first logging in to the admin account, you will be prompted to change your password and then select whether or not to enable anonymous authentication going forward.
If you intend to set up QDE as an internet-facing server, we recommend you keep anonymous authentication <strong>OFF</strong>.
If your QDE instance will <strong>not</strong> be internet-facing and only used over a VPN or other secured network, it is generally safe to leave anonymous authentication turned on.</p>
<p>Unless security requirements in your organization stipulate that role-based access controls be in place, this is our recommended configuration for QDE in its default configuration.</p>
<p>Sources configured in Chocolatey can only read data from their remote endpoints, and cannot delete items.
If you need to limit the packages people have access to, control this with separate Hosted and Group repositories.
Consult the <a href="https://help.sonatype.com/repomanager3">Nexus documentation</a> or reach out to Chocolatey Support for more information.</p>
<h3 id="jenkins">Jenkins</h3>
<table>
<thead>
<tr>
<th style="text-align: center;">URL</th>
<th style="text-align: center;">Login</th>
<th style="text-align: center;">Initial Password</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><a href="http://localhost:8080">http://localhost:8080</a></td>
<td style="text-align: center;"><code>admin</code></td>
<td style="text-align: center;"><code>{{JenkinsPassword}}</code></td>
</tr>
</tbody>
</table>
<p>For using Jenkins, please refer to our <a href="../how-tos/setup-internal-package-repository">online documentation</a>.</p>
<p>At most, you will need to:</p>
<ol>
<li>Login to Jenkins and complete first-time setup (see below).</li>
<li>Change your password (by going to <code>People &gt; admin &gt; Configure</code> on the sidebar, scroll down to change password section).</li>
<li>Enable the pre-configured jobs to run on the schedule of your choosing.
Our documentation can assist with ensuring this is done correctly.</li>
</ol>
<details>
    <summary><strong>First-Time Setup</strong></summary>
<p>In order to begin using Jenkins, the following steps will need to be performed:</p>
<ol>
<li><p>Visit <a href="http://localhost:8080">http://localhost:8080</a> in a web browser</p>
</li>
<li><p>Enter the administrator password into the textbox and click <code>Continue</code></p>
</li>
<li><p>From the Plugin Installation Page select &quot;Install Suggested Plugins&quot;</p>
<blockquote>
<p>:memo: <strong>Note</strong></p>
<p>Some of these may fail to install, and that is OK.</p>
</blockquote>
</li>
<li><p>Once the plugin installation completes, select <code>Continue</code></p>
</li>
<li><p>Click <code>Continue As Admin</code> on the Create First Admin User page</p>
</li>
<li><p>Update the Jenkins URL <em>if</em> you have changed the hostname of the server prior to beginning with this setup document.</p>
</li>
<li><p>Click <code>Save and Finish</code></p>
</li>
<li><p>Click <code>Restart</code> to restart your Jenkins instance.
This <em>does</em> take a while.
If after 30 seconds you don't see your browser auto-refresh, go ahead and do so manually.</p>
</li>
</ol>
</details>
<h3 id="chocolatey-central-management">Chocolatey Central Management</h3>
<blockquote>
<p>:memo: <strong>Note</strong></p>
<p>If you have changed the hostname from the default, or you're using a FQDN for the server setup, this hostname will have changed.
In that case, substitute the hostname for the new FQDN.</p>
</blockquote>
<table>
<thead>
<tr>
<th style="text-align: center;">URL</th>
<th style="text-align: center;">Login</th>
<th style="text-align: center;">Initial Password</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><a href="https://chocoserver:443">https://chocoserver:443</a></td>
<td style="text-align: center;"><code>ccmadmin</code></td>
<td style="text-align: center;"><code>123qwe</code></td>
</tr>
</tbody>
</table>
<h3 id="firewall-ports">Firewall ports</h3>
<p>To allow access to all services, the following firewall ports have been opened on QDE by default.</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Port</th>
<th style="text-align: left;">Service</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">8443</td>
<td style="text-align: left;">Nexus (HTTPS)</td>
</tr>
<tr>
<td style="text-align: center;">443</td>
<td style="text-align: left;">Central Management Dashboard (HTTPS)</td>
</tr>
<tr>
<td style="text-align: center;">24020</td>
<td style="text-align: left;">Central Management Service communications for Agent communication over HTTPS</td>
</tr>
<tr>
<td style="text-align: center;">80</td>
<td style="text-align: left;">QDE Certificate script endpoint (HTTP), to allow client machines to import the QDE HTTPS certificate.</td>
</tr>
</tbody>
</table>
<h3 id="browser-considerations">Browser Considerations</h3>
<p>We recommend you use either Mozilla Firefox or Google Chrome to interact with all Web interfaces for the different services installed.
You will find Google Chrome pre-installed in the environment.</p>
<blockquote>
<p>:warning: <strong>Warning</strong></p>
<p>There is a known issue in some QDE configurations where Firefox will be unable to load Nexus correctly.
If this occurs, you need to disable the <code>Block dangerous and deceptive content</code> option under <strong>Security</strong> in order to load Nexus.</p>
</blockquote>
<h2 id="step-4-change-the-api-key-recommended">Step 4: Change the API Key (Recommended)</h2>
<p>You may wish to change the API key before you start using things.
To do so, log in to Nexus using the information above, or your new credentials if you have already gone through the first run wizard.
Once logged in perform the following steps:</p>
<details>
    <summary>Click to show animated summary</summary>
<p><img src="/assets/images/gifs/choco_qde_update_apikey.gif" alt="changing the choco API key" /></p>
</details>
<ol>
<li>Click on your username in the upper right-hand side of the homepage</li>
<li>Select <strong>NuGet API Key</strong> from the left-hand navigation window</li>
<li>Select <strong>Reset API Key</strong></li>
<li>Enter your password</li>
<li>Select <strong>Access API Key</strong></li>
<li>Enter your password again</li>
<li>Take note of the new API key</li>
</ol>
<p>If you change your API key, you will need to change the key in the Jenkins jobs that are pre-configured for you.
See the next section for information on how to connect to Jenkins.</p>
<h3 id="choco-apikey-command">Choco Apikey Command</h3>
<p>To help make pushing packages easier, the <code>choco apikey</code> command is available.
This will store your API key for a specific source as part of Chocolatey's configuration.
This will be encrypted. To setup, do the following:</p>
<blockquote>
<p>:memo: <strong>Note</strong></p>
<p>If you have changed the hostname from the default, or you're using a FQDN for the server setup, this hostname will have changed.
In that case, substitute the hostname for the new FQDN.</p>
</blockquote>
<pre><code class="language-powershell">choco apikey add --key=&quot;'{{NexusApiKey}}'&quot; --source=&quot;'https://chocoserver:8443/repository/ChocolateyInternal/'&quot;
</code></pre>
<h3 id="update-pre-configured-jenkins-jobs-with-the-new-api-key">Update pre-configured Jenkins jobs with the new API Key</h3>
<p>After updating the Nexus API Key, you'll need to ensure that the preconfigured Jenkins jobs are also updated with the new API key.
To do so:</p>
<ol>
<li>Login to Jenkins after completing the first-time setup (see <a href="#jenkins">above</a>)</li>
<li>For each of the pre-existing jobs shown (e.g., <code>Internalize packages from the Community Repository</code>), do the following:
<ol>
<li>Hover over the name of the job and select the drop-down arrow that shows up</li>
<li>Select <strong>:gear: Configure</strong></li>
<li>Scroll down until you see the <strong>Password Parameter</strong>; these will be named either <code>P_API_KEY</code>, <code>P_PROD_REPO_API_KEY</code>, or <code>P_LOCAL_REPO_API_KEY</code>, depending on the job you're editing</li>
<li>Select <strong>Change Password</strong> next to the <strong>:lock: Concealed</strong> Default Value</li>
<li>Replace the contents of the field with the new API key</li>
<li>Press the <strong>Save</strong> button at the bottom of the page</li>
</ol>
</li>
</ol>
<h2 id="step-5-install-and-configure-chocolatey-on-clients">Step 5: Install and Configure Chocolatey On Clients</h2>
<p>Refer to <a href="./client-setup">the Client Setup documentation</a>.</p>
<h2 id="step-6-license-the-qde-vm">Step 6: License the QDE VM</h2>
<p>This VM is running an <strong>UNACTIVATED</strong> Server 2019 Standard Operating System.
If you plan to use this virtual machine long-term, you <em>will</em> need to apply a license to the VM.
If you use a KMS server in your environment, and have it configured on clients via Group Policy, you likely have nothing to do here, but verify.</p>
<p>If you rely on Retail or MAK licensing, you will need to apply the license using the following command, replacing the <code>x</code>'s with your actual product key:</p>
<blockquote>
<p>:memo: <strong>Note</strong></p>
<p>Please run the below from an administrative PowerShell session.</p>
</blockquote>
<pre><code class="language-powershell">slmgr.vbs /ipk xxxxx-xxxxx-xxxxx-xxxxx
</code></pre>
<h2 id="common-errors-and-resolutions">Common Errors and Resolutions</h2>
<blockquote>
<p>:memo: <strong>NOTE</strong></p>
<p>This document is for <strong>Version 2</strong> of the Quick Deployment Environment.
If you're using an older version of QDE, please refer to the <a href="./v1/desktop-readme">document for that version</a>.</p>
</blockquote>
<h3 id="server-error-warning-when-resetting-admin-credential-in-nexus">&quot;Server Error&quot; warning when resetting &quot;admin&quot; credential in Nexus</h3>
<p>When attempting to reset the <code>admin</code> account credential in Nexus, you receive a &quot;Server Error&quot; warning in the top right corner of the page, as shown below:</p>
<p><img src="/assets/images/quickdeploy/QDE-nexus-pw-error.png" alt="QDE Nexus pw error" /></p>
<p>Though it may not be obvious, this is actually caused by Nexus not having enough disk space to function properly.
We sometimes see this occur if <a href="#step-1-expand-disk-size">Step 1: Expand Disk Size</a> was skipped.
Confirm that you have completed that step and then try again.</p>
<p>Keep in mind, this step is <strong>NOT</strong> the same as expanding the disk at the hypervisor level.
You will need to both expand the hypervisor disk space allocation, <em>and</em> expand the partition within the VM.</p>
<h3 id="context-menu-items-for-package-builder-and-package-uploader-not-available">Context menu items for Package Builder and Package Uploader not available</h3>
<p>When right-clicking an exe or msi file on QDE, you may notice that the context menu items for Package Builder are missing.
As well, when right-clicking on a nupkg file, you may also see the Package Uploader context menu entry is missing.
This feature can be controlled by passing a custom parameter when installing the Chocolatey Licensed Extension package, but can be restored to its default state quite simply.</p>
<p>Assuming the latest <code>chocolatey.extension.nupkg</code> is in your <code>C:\choco-setup\packages</code> folder, open up an Administrative PowerShell window and reinstall the Chocolatey Licensed Extension.
Then, restart Explorer for your changes to take effect immediately.</p>
<pre><code class="language-powershell">choco upgrade chocolatey.extension -y --source=&quot;'C:\choco-setup\packages'&quot;
Stop-Process -Name explorer -Force
</code></pre>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="./">Quick Deployment Environment</a></li>
<li><a href="./setup">QDE Setup</a></li>
<li><a href="./desktop-readme">QDE Desktop ReadMe File</a></li>
<li><a href="./ssl-setup">QDE SSL/TLS Setup</a></li>
<li><a href="./firewall-changes">QDE Firewall Changes</a></li>
<li><a href="./client-setup">QDE Client Setup</a> (setting up your client machines)</li>
</ul>

                                    </div>
                                <div class="col-lg-2 d-none d-lg-block bg-body pl-3 pt-3">
                                            <div class="border-bottom mb-3">
                                                <p class="small font-weight-bold">On This Page</p>
                                                    <p class="small"><a href="#chocolatey-quick-deployment-environment-readme">Chocolatey Quick Deployment Environment README</a></p>
                                                    <p class="small"><a href="#summary">Summary</a></p>
                                                    <p class="small"><a href="#step-0-complete-prerequisites">Step 0: Complete Prerequisites</a></p>
                                                    <p class="small"><a href="#step-1-expand-disk-size">Step 1: Expand Disk Size</a></p>
                                                    <p class="small"><a href="#step-2-environment-setup">Step 2: Environment Setup</a></p>
                                                    <p class="small"><a href="#add-your-chocolatey-license">1. Add Your Chocolatey License</a></p>
                                                    <p class="small"><a href="#optional-change-the-vm-hostname">2. (Optional) Change the VM Hostname</a></p>
                                                    <p class="small"><a href="#run-the-set-qdenvironment.ps1-script">3. Run the Set-QDEnvironment.ps1 Script</a></p>
                                                    <p class="small"><a href="#select-community-packages-to-internalize">4. Select Community Packages to Internalize</a></p>
                                                    <p class="small"><a href="#step-3-review-configure-host-services">Step 3: Review &amp;amp; Configure Host Services</a></p>
                                                    <p class="small"><a href="#nexus-repository">Nexus Repository</a></p>
                                                    <p class="small"><a href="#jenkins">Jenkins</a></p>
                                                    <p class="small"><a href="#chocolatey-central-management">Chocolatey Central Management</a></p>
                                                    <p class="small"><a href="#firewall-ports">Firewall ports</a></p>
                                                    <p class="small"><a href="#browser-considerations">Browser Considerations</a></p>
                                                    <p class="small"><a href="#step-4-change-the-api-key-recommended">Step 4: Change the API Key (Recommended)</a></p>
                                                    <p class="small"><a href="#choco-apikey-command">Choco Apikey Command</a></p>
                                                    <p class="small"><a href="#update-pre-configured-jenkins-jobs-with-the-new-api-key">Update pre-configured Jenkins jobs with the new API Key</a></p>
                                                    <p class="small"><a href="#step-5-install-and-configure-chocolatey-on-clients">Step 5: Install and Configure Chocolatey On Clients</a></p>
                                                    <p class="small"><a href="#step-6-license-the-qde-vm">Step 6: License the QDE VM</a></p>
                                                    <p class="small"><a href="#common-errors-and-resolutions">Common Errors and Resolutions</a></p>
                                                    <p class="small"><a href="#server-error-warning-when-resetting-admin-credential-in-nexus">&quot;Server Error&quot; warning when resetting &quot;admin&quot; credential in Nexus</a></p>
                                                    <p class="small"><a href="#context-menu-items-for-package-builder-and-package-uploader-not-available">Context menu items for Package Builder and Package Uploader not available</a></p>
                                                    <p class="small"><a href="#see-also">See Also</a></p>
                                            </div>
                                        <p class="small font-weight-bold"><a href="https://github.com/chocolatey/docs/edit/master/input/en-us/quick-deployment/desktop-readme.md"><i class="fad fa-pencil"></i> Edit This Page</a></p>
                                </div>
                            </div>
                        </div>
                </div>
            </div>
        </div>
        <div id="footer" class="p-3 text-white font-size-sm">
            <div class="container">
                <div>
                    <span>© 2020 Chocolatey Software, Inc.</span>
                    <span class="float-right" style="color: #888888;">0.0.0-preview.0.81</span>
                </div>
            </div>
        </div>
        <script>
            anchors.options.placement = 'left';
            anchors.add();

            var snippets = document.querySelectorAll("pre > code");
            [].forEach.call(snippets, function(snippet) {
                snippet.insertAdjacentHTML("beforebegin", "<button class='btn-copy' data-clipboard-snippet><img class='clippy' width=13 src='/assets/images/clippy.svg' alt='Copy to clipboard'></button>");
            });
            var clipboardSnippets = new Clipboard('[data-clipboard-snippet]', {
                target: function(trigger) {
                    return trigger.nextElementSibling;
                }
            });
            clipboardSnippets.on('success', function(e) {
                e.clearSelection();
                showTooltip(e.trigger, "Copied!");
            });
            clipboardSnippets.on('error', function(e) {
                showTooltip(e.trigger, fallbackMessage(e.action));
            });
            var btns = document.querySelectorAll('.btn-copy');
            for (var i = 0; i < btns.length; i++) {
                btns[i].addEventListener('mouseleave', function(e) {
                    e.currentTarget.setAttribute('class', 'btn-copy');
                    e.currentTarget.removeAttribute('aria-label');
                });
            }
            function showTooltip(elem, msg) {
                elem.setAttribute('class', 'btn-copy tooltipped tooltipped-s');
                elem.setAttribute('aria-label', msg);
            }
            function fallbackMessage(action) {
                var actionMsg = '';
                var actionKey = (action === 'cut' ? 'X' : 'C');
                if (/iPhone|iPad/i.test(navigator.userAgent)) {
                    actionMsg = 'No support :(';
                } else if (/Mac/i.test(navigator.userAgent)) {
                    actionMsg = 'Press ⌘-' + actionKey + ' to ' + action;
                } else {
                    actionMsg = 'Press Ctrl-' + actionKey + ' to ' + action;
                }
                return actionMsg;
            }

            $(document).ready(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        useMaxWidth: false
                    },
					startOnLoad: false,
					cloneCssStyles: false
                });
                mermaid.init(undefined, ".mermaid");

                // Remove the max-width setting that Mermaid sets
                var mermaidSvg = $('.mermaid svg');
                mermaidSvg.addClass('img-responsive');
                mermaidSvg.css('max-width', '');

                // Make it scrollable
				var target = document.querySelector(".mermaid svg");
				if(target !== null)
				{
					var panZoom = window.panZoom = svgPanZoom(target, {
						zoomEnabled: true,
						controlIconsEnabled: true,
						fit: true,
						center: true,
                        maxZoom: 20,
                        zoomScaleSensitivity: 0.6
					});

                    // Do the reset once right away to fit the diagram
                    panZoom.resize();
                    panZoom.fit();
                    panZoom.center();

                    $(window).resize(function(){
                        panZoom.resize();
                        panZoom.fit();
                        panZoom.center();
                    });
				}
            });
        </script>
        <script>
            ((window.gitter = {}).chat = {}).options = {
                room: 'chocolatey/choco'
            };
        </script>
        <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
    </body>
</html>